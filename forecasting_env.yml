name: retail_forecasting
channels:
  - pytorch      # For GPU-optimized PyTorch
  - conda-forge  # Primary package source
  - defaults     # Fallback

dependencies:
  # Core Python and Environment
  - python=3.11.8
  - pip>=23.0
  - setuptools>=65.0
  - wheel>=0.38.0
  
  # Core Data Science Libraries
  - numpy>=1.21.0
  - pandas>=1.5.0
  - scipy>=1.9.0
  
  # Machine Learning Core
  - scikit-learn>=1.1.0
  - joblib>=1.2.0
  
  # Deep Learning - PyTorch Ecosystem
  - pytorch>=2.0.0     # Will auto-install GPU version if NVIDIA drivers exist
  - torchvision>=0.15.0
  - torchaudio>=2.0.0
  
  # Gradient Boosting
  - xgboost>=1.6.0
  - lightgbm>=3.3.0
  
  # Time Series Libraries
  - statsmodels>=0.13.0
  - pmdarima>=2.0.0   
  - prophet>=1.1.0      # Now available via conda-forge (no pip needed)
  - holidays>=0.28  # US holidays support
  
  # Visualization (Essential)
  - matplotlib>=3.5.0
  - plotly>=5.10.0
  - seaborn>=0.13.0    # Fixed: removed exact version pin
  
  # Hyperparameter Optimization
  - optuna>=3.0.0
  
  # JupyterLab Environment (Minimal)
  - jupyterlab>=4.0.0
  - ipykernel>=6.15.0
  - ipywidgets>=8.0.0
  - jupyterlab_widgets>=3.0.10  # Fixed: changed from exact pin
  
  # Utility Libraries
  - tqdm>=4.64.0
  - pyyaml>=6.0
  - python-dotenv>=1.0.0  # For environment variables
  - structlog>=23.1.0  # Advanced logging
  
  # Data Processing
  - openpyxl>=3.0.0
  - h5py>=3.7.0
  
  # API and Web (Minimal)
  - requests>=2.28.0
  
  # Parallel Processing
  - dask>=2022.8.0
  
  # Pip-only packages
  - pip:
    # Advanced Deep Learning for Time Series
    - pytorch-forecasting>=0.10.0  # Only if using TFT
    - pytorch-lightning>=1.8.0
    
    # Additional Time Series Libraries
    - darts>=0.21.0
    
    # Feature Engineering (Essential)
    - tsfresh>=0.20.0
    
    # Visualization (Production)
    - dash>=2.6.0
    
    # Model Interpretation (Essential)
    - shap>=0.41.0         # GPU acceleration if available
    
    # Configuration Management/ Production utilities
    - hydra-core>=1.2.0
    - omegaconf>=2.2.0
    
    # Experiment Tracking (Minimal)
    - mlflow>=1.28.0
    
    # Model Deployment
    - bentoml>=1.0.0
    
    # Additional Utilities
    - colorama>=0.4.5
    - rich>=13.7.0  # Fixed: changed from exact pin
    - python-json-logger>=2.0.7  # JSON formatted logs

# Environment Variables (moved outside dependencies)
variables:
  PYTHONPATH: "lib/python3.11/site-packages"
  OMP_NUM_THREADS: "4"
  MKL_NUM_THREADS: "4"
  JUPYTER_CONFIG_DIR: "etc/jupyter"
  JUPYTER_DATA_DIR: "share/jupyter"
  MLFLOW_TRACKING_URI: "file://./mlruns"
  PYTHONUNBUFFERED: "1"
  PYTHONIOENCODING: "UTF-8"
  PYTHONOPTIMIZE: "1"                   # Enable optimizations
  LOG_LEVEL: "INFO"                     # Default logging level

  
